{
  label: 'Budget cumul',
  data: budgetCumul,
  type: 'line',
  stepped: true,
  borderColor: (ctx) => {
    if (!ctx.p0 || !ctx.p1) return 'green'; // couleur par défaut si segment non défini

    const i = ctx.p0DataIndex;
    const startVal = ctx.p0.parsed.y;
    const endVal = ctx.p1.parsed.y;

    // Comparaison avec le budgetCumul[i] ou i+1 si tu veux
    const budgetStart = budgetCumul[i] ?? 0;      // sécurité si undefined
    const budgetEnd = budgetCumul[i + 1] ?? 0;

    if (startVal > budgetStart || endVal > budgetEnd) {
      return 'red';
    }
    return 'green';
  },
  fill: false
}
